/*
        Copyright 2020 George C. Rosar II licensed under:
                 Apache License
           Version 2.0, January 2004
        http://www.apache.org/licenses/
        
        Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
struct waveform_t {
  int WaveformMod_id;
  float freqNote = 0.0;
  int midiNote = 0;
  AudioSynthWaveformModulated mod;
  bool isPlaying = false;
};

struct voice_t {
  int waveformMod_id;
  byte channel;
  byte note;
};

const int TOTAL_VOICES = 64;
const int TOTAL_MIXERS = 21;
const int SECONDARY_MIXERS = 4;
const float rad = TOTAL_VOICES / 360;
const int ARRAY_SIZE = 98;

const char* note_map[] = {
  "C","C#","D","D#","E","F","F#","G","G#","A","A#","B",
};

const float midiNotes[128] = {8.18, 8.66, 
    9.18, 9.72, 10.30, 10.91, 
    11.56, 12.25, 12.98, 13.75, 
    14.57, 15.43, 16.35, 17.32, 
    18.35, 19.45, 20.60, 21.83, 
    23.12, 24.50, 25.96, 27.50, 
    29.14, 30.87, 32.70, 34.65, 
    36.71, 38.89, 41.20, 43.65, 
    46.25, 49.00, 51.91, 55.00, 
    58.27, 61.74, 65.41, 69.30, 
    73.42, 77.78, 82.41, 87.31, 
    92.50, 98.00, 103.83, 110.00, 
    116.54, 123.47, 130.81, 138.59, 
    146.83, 155.56, 164.81, 174.61, 
    185.00, 196.00, 207.65, 220.00, 
    233.08, 246.94, 261.63, 277.18, 
    293.66, 311.13, 329.63, 349.23, 
    369.99, 392.00, 415.30, 440.00, 
    466.16, 493.88, 523.25, 554.37, 
    587.33, 622.25, 659.26, 698.46, 
    739.99, 783.99, 830.61, 880.00, 
    932.33, 987.77, 1046.50, 1108.73, 
    1174.66, 1244.51, 1318.51, 1396.91, 
    1479.98, 1567.98, 1661.22, 1760.00, 
    1864.65, 1975.53, 2093.00, 2217.46, 
    2349.32, 2489.02, 2637.02, 2793.83, 
    2959.96, 3135.96, 3322.44, 3520.00, 
    3729.31, 3951.07, 4186.01, 4434.92, 
    4698.64, 4978.03, 5274.04, 5587.65, 
    5919.91, 6271.93, 6644.88, 7040.00, 
    7458.62, 7902.13, 8372.02, 8869.84, 
    9397.27, 9956.06, 10548.08, 11175.30, 
    11839.82, 12543.86,
};

/////
//waveforms

const int16_t Garmfeld[256] = {
  -32767, 
  -32510, -32253, -31996, -31739, 
  -31482, -31225, -30968, -30711, 
  -30454, -30197, -29940, -29683, 
  -29426, -29169, -10485, -10485, 
  -10485, -10485, -10485, -10485, 
  -10485, -10485, -10704, -10704, 
  -10704, -26085, -25828, -25571, 
  -25314, -25057, -24800, -24543, 
  -24286, -24029, -23772, -23515, 
  -23258, -23001, -22744, -22487, 
  -22230, -3714, -3714, -3714, 
  -3714, -3714, -3714, -3714, 
  -3714, -3714, -3714, -19403, 
  -19146, -18889, -18632, -18375, 
  -18118, -17861, -17604, -17347, 
  -17090, -16833, -16576, -16319, 
  -16062, -15805, -15548, -15291, 
  -15034, -14777, -14520, -14263, 
  -14006, -13749, -13492, -4150, 
  -4150, -4150, -4150, -4150, 
  -4150, -4150, -4150, -4150, 
  -10922, -10665, -10408, -10151, 
  -9894, -9637, -9380, -9123, 
  -8866, -8609, -8352, -8095, 
  -7838, -7581, -7324, -7067, 
  -2621, -2621, -2621, -2621, 
  -2621, -2403, -2403, -5011, 
  -4754, -4497, -4240, -3983, 
  -3726, -3469, -3212, -2955, 
  -2698, -2441, -2184, -1927, 
  -1670, -1413, -1156, -899, 
  -642, -385, -128, 0, 
  257, 514, 771, 1028, 
  1285, 1542, 1799, 2056, 
  2313, 2570, 2827, 3084, 
  3341, 3598, 3855, 3058, 
  3058, 3058, 3058, 3058, 
  3277, 3277, 5911, 6168, 
  6425, 6682, 6939, 7196, 
  7453, 7710, 7967, 8224, 
  8481, 2403, 2403, 2621, 
  2621, 2621, 2621, 2621, 
  10537, 10794, 11051, 11308, 
  11565, 11822, 12079, 12336, 
  12593, 12850, 13107, 13364, 
  13621, 13878, 5243, 5243, 
  5243, 5461, 5461, 5461, 
  15677, 15934, 16191, 16448, 
  3714, 3495, 3277, 3277, 
  3277, 3277, 3495, 3495, 
  18761, 19018, 19275, 19532, 
  19789, 20046, 20303, 20560, 
  20817, 5898, 5898, 5898, 
  5898, 5898, 5898, 5898, 
  5898, 23130, 23387, 23644, 
  23901, 24158, 24415, 24672, 
  24929, 3495, 3495, 3495, 
  3495, 3495, 3495, 3495, 
  26985, 27242, 27499, 27756, 
  28013, 28270, 28527, 28784, 
  12233, 12015, 12015, 12233, 
  12233, 30326, 30583, 30840, 
  31097, 31354, 31611, 31868, 
  32125, 32382, 32639,
};

const int16_t SawDerange[256] = {
0, 
514, 1028, 1542, 2056, 
2570, 3084, 3598, 4112, 
4626, 5140, 5654, 6168, 
6682, 7196, 7710, 8224, 
8738, 9252, 9766, 10280, 
10794, 11308, -5789, -5789, 
-5789, -5789, -5898, -6007, 
14906, 15420, 15934, 16448, 
16962, 17476, 17990, 18504, 
19018, 19532, 20046, 20560, 
21074, 5570, 5570, 5461, 
-6444, -6444, -6444, -6444, 
5352, 5352, 5352, 5352, 
5461, 5352, 5461, 5461, 
-15182, -15947, -17148, -26214, 
-25995, -24903, -24138, -23811, 
-23046, -22282, -21626, -21408, 
-20971, -20643, -20425, -19769, 
-19223, -18896, -18240, -17585, 
-17148, 20316, 18896, 16602, 
-3277, 12888, 11468, 8847, 
5570, 4478, -765, -1857, 
-2512, -4041, -5024, -5461, 
-12561, -13107, -13762, -14527, 
-15182, -7536, -7318, -6772, 
-6117, -5680, -5024, -4369, 
-3932, -3167, -2184, -1966, 
-1420, -546, 8609, 8095, 
7581, 7067, 6553, 6039, 
-3386, -3386, -3386, 3983, 
3469, 2955, 2441, 1927, 
1413, 899, 385, 0, 
-514, -1028, -1542, -2056, 
-2570, -3084, -3598, -4112, 
-4626, -5140, -5654, -6168, 
-6682, -7196, -7710, -8224, 
-8738, -9252, -9766, -10280, 
-10794, -11308, -11822, -12336, 
-12850, -13364, -13878, -14392, 
-14906, -8301, -8301, 5461, 
6663, 7209, 8083, 9393, 
10376, 11032, 11468, 10922, 
9175, 7209, 6117, 6007, 
-23130, -23644, -24158, -24672, 
-25186, -25700, -26214, -26728, 
13216, 13216, -4478, -4478, 
13434, 14090, 16165, 16602, 
17257, 17585, 17476, 16930, 
16384, 15291, -3823, -3823, 
13434, 13544, 13434, -28655, 
-28141, -27627, -27113, -9066, 
-9175, -9175, -9066, 437, 
2403, 4697, 6007, 7100, 
7864, 8519, 8192, 7318, 
4587, 2731, 1201, -8629, 
-17861, -17347, -16833, -16319, 
-15805, -15291, -14777, -14263, 
-13749, -13235, -12721, -12207, 
-11693, -11179, -10665, -10151, 
-9637, -9123, -8609, -8095, 
-7581, -7067, -6553, -6039, 
-5525, -5011, -4497, -3983, 
-3469, -2955, -2441, -1927, 
-1413, -899, 0
};


const int16_t coolIphoneWave[256] = {
  0, 
  -514, -1028, -1542, -2056, 
  -2570, -3084, -3598, -4112, 
  -4626, -5140, -5654, -6168, 
  -6682, -7196, -7710, -8224, 
  -8738, -9252, -9766, -10280, 
  -10794, -11308, -11822, -12336, 
  -12850, -13364, -13878, -14392, 
  -14906, -15420, -15934, 16448, 
  16962, 17476, 17990, 18504, 
  19018, 19532, 20046, 20560, 
  21074, 21588, 22102, 22616, 
  23130, 23644, 24158, 24672, 
  25186, 25700, 26214, 26728, 
  27242, 27756, 28270, 28784, 
  29298, 29812, 30326, 30840, 
  31354, 31868, 32382, 32767, 
  32253, 31739, 31225, 30711, 
  30197, 29683, 29169, 28655, 
  28141, 27627, 27113, 26599, 
  26085, 25571, 25057, 24543, 
  24029, 23515, 23001, 22487, 
  21973, 21459, 20945, 20431, 
  19917, 19403, 18889, -18375, 
  -17861, -17347, -16833, -16319, 
  -15805, -15291, -14777, -14263, 
  -13749, -13235, -12721, -12207, 
  -11693, -11179, -10665, -10151, 
  -9637, -9123, -8609, -8095, 
  -7581, -7067, -6553, -6039, 
  -5525, -5011, -4497, -3983, 
  -3469, -2955, -2441, -1927, 
  -1413, -899, -385, 0, 
  -514, -1028, -1542, -2056, 
  -2570, -3084, -3598, -4112, 
  -4626, -5140, -5654, -6168, 
  -6682, -7196, -7710, -8224, 
  -8738, -9252, -9766, -10280, 
  -10794, -11308, -11822, -12336, 
  -12850, -13364, -13878, -14392, 
  -14906, -15420, -15934, 16448, 
  16962, 17476, 17990, 18504, 
  19018, 19532, 20046, 20560, 
  21074, 21588, 22102, 22616, 
  23130, 23644, 24158, 24672, 
  25186, 25700, 26214, 26728, 
  27242, 27756, 28270, 28784, 
  29298, 29812, 30326, 30840, 
  -31354, -31868, -32382, -32767, 
  -32253, -31739, -31225, -30711, 
  -30197, -29683, -29169, -28655, 
  -28141, -27627, -27113, -26599, 
  -26085, -25571, -25057, -24543, 
  -24029, -23515, -23001, -22487, 
  -21973, -21459, -20945, -20431, 
  -19917, -19403, -18889, -18375, 
  -17861, -17347, -16833, 16319, 
  15805, 15291, 14777, 14263, 
  13749, 13235, 12721, 12207, 
  11693, 11179, 10665, 10151, 
  9637, 9123, 8609, 8095, 
  7581, 7067, 6553, 6039, 
  5525, 5011, 4497, 3983, 
  3469, 2955, 2441, 1927, 
  1413, 899, 385,
};

extern const int16_t myWaveform[256];  // defined in myWaveform.ino
/////
